package arcommands

import (
	"testing"

	"github.com/stretchr/testify/require"
)

func TestEncodeCommand(t *testing.T) {
	encodedData, err := encodeCommand(
		1,
		2,
		3,
		uint8(4),
		int8(5),
		uint16(6),
		int16(7),
		uint32(8),
		int32(9),
		uint64(10),
		int64(11),
		float32(12),
		float64(13),
	)
	require.NoError(t, err)
	require.Equal(
		t,
		[]byte{
			0x01,       // Feature
			0x02,       // Class
			0x03, 0x00, // Command (little endian)
			// Args-- all little endian if more than one byte
			0x04,
			0x05,
			0x06, 0x00,
			0x07, 0x00,
			0x08, 0x00, 0x00, 0x00,
			0x09, 0x00, 0x00, 0x00,
			0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
			0x0b, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
			0x00, 0x00, 0x40, 0x41,
			0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2a, 0x40,
		},
		encodedData,
	)
}
